[gd_scene load_steps=20 format=3 uid="uid://bg7ygyklc4oq0"]

[ext_resource type="TileSet" uid="uid://b3v8i8oi20y22" path="res://assets/resources/tile_sets/outside.tres" id="1_tvu47"]
[ext_resource type="Shader" path="res://scripts/misc/scroll.gdshader" id="1_ux8y6"]
[ext_resource type="PackedScene" uid="uid://sx8d1fd6ter4" path="res://scenes/interactables/door.tscn" id="2_k0awt"]
[ext_resource type="Texture2D" uid="uid://b6lqfvu4mrg2o" path="res://assets/art/backgrounds/clouds.png" id="2_kt2yi"]
[ext_resource type="PackedScene" uid="uid://di4sis4pjpkqx" path="res://scenes/npcs/old_man_o_malley.tscn" id="5_bimur"]
[ext_resource type="PackedScene" uid="uid://d28b8s4uq8l1c" path="res://scenes/interactables/bed.tscn" id="5_lvp32"]
[ext_resource type="Texture2D" uid="uid://ddpadqw2efo5l" path="res://assets/art/environments/bed.png" id="6_vxsbm"]
[ext_resource type="Texture2D" uid="uid://cvwcqs38sh45g" path="res://assets/art/environments/sleeping.png" id="7_dt6dk"]
[ext_resource type="PackedScene" uid="uid://cdbdgkigbjfga" path="res://scenes/interactables/chest.tscn" id="9_y25m5"]
[ext_resource type="Resource" uid="uid://bt5wg4f3jk8xb" path="res://assets/resources/dialogues/interactables/chest.dialogue" id="10_2jodl"]
[ext_resource type="Resource" uid="uid://dmc3jb7dd35co" path="res://assets/resources/items/bread.tres" id="11_dvcmk"]
[ext_resource type="Script" path="res://assets/resources/inventory_slot.gd" id="12_y1f2w"]
[ext_resource type="Script" path="res://assets/resources/inventory.gd" id="13_crpra"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6qv8n"]
shader = ExtResource("1_ux8y6")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2586o"]
size = Vector2(32, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c6vuk"]
size = Vector2(41, 48)

[sub_resource type="Resource" id="Resource_c118t"]
script = ExtResource("12_y1f2w")
item = ExtResource("11_dvcmk")
quantity = 3

[sub_resource type="Resource" id="Resource_d0x5e"]
script = ExtResource("13_crpra")
items = Array[ExtResource("12_y1f2w")]([SubResource("Resource_c118t")])

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g3x2x"]
size = Vector2(16, 16)

[node name="House" type="Node2D"]
y_sort_enabled = true

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = 480.0
offset_top = -400.0
offset_right = 512.0
offset_bottom = -368.0
pivot_offset = Vector2(22, 30)
color = Color(0.254902, 0.690196, 0.996078, 1)

[node name="Clouds" type="Sprite2D" parent="."]
texture_repeat = 2
material = SubResource("ShaderMaterial_6qv8n")
position = Vector2(544, -384)
scale = Vector2(0.367816, 0.416667)
texture = ExtResource("2_kt2yi")

[node name="TileMap" type="TileMap" parent="."]
y_sort_enabled = true
tile_set = ExtResource("1_tvu47")
format = 2
layer_0/name = "floor"
layer_0/tile_data = PackedInt32Array(-983012, 65542, 1, -983011, 65542, 1, -983010, 65542, 1, -983009, 65542, 1, -983008, 65542, 1, -983007, 65542, 1, -983006, 65542, 1, -983005, 65542, 1, -983004, 65542, 1, -983003, 65542, 1, -917476, 65542, 1, -983002, 65542, 1, -1310688, 262150, 2, -1310687, 327686, 2, -1310692, 196614, 2, -1048548, 65542, 1, -851940, 65542, 1, -1310691, 262150, 2, -1048547, 65542, 1, -917475, 65542, 1, -851939, 65542, 1, -1048546, 65542, 1, -917474, 65542, 1, -851938, 65542, 1, -1048545, 65542, 1, -917473, 65542, 1, -851937, 65542, 1, -1376224, 262150, 1, -1048544, 65542, 1, -917472, 65542, 1, -851936, 65542, 1, -1376223, 327686, 1, -1048543, 65542, 1, -917471, 65542, 1, -851935, 65542, 1, -1048542, 65542, 1, -917470, 65542, 1, -851934, 65542, 1, -1048541, 65542, 1, -917469, 65542, 1, -851933, 65542, 1, -1048540, 65542, 1, -917468, 65542, 1, -851932, 65542, 1, -1048539, 65542, 1, -917467, 65542, 1, -851931, 65542, 1, -1048538, 65542, 1, -917466, 65542, 1, -851930, 65542, 1, -1376228, 196614, 1, -1376227, 262150, 1, -1376226, 262150, 1, -1376225, 262150, 1, -1310690, 262150, 1, -1310689, 262150, 1, -1441764, 196614, 1, -1441763, 262150, 1, -1441762, 262150, 1, -1441761, 262150, 1, -1441760, 262150, 1, -1441759, 327686, 1, -1507300, 196614, 0, -1507299, 262150, 0, -1507298, 262150, 0, -1507297, 262150, 0, -1507296, 262150, 0, -1507295, 327686, 0, -1638371, 851974, 0, -1572835, 851974, 0, -1572836, 851974, 0, -1638372, 851974, 0, -1572827, 851974, 0, -1638363, 851974, 0, -1572826, 851974, 0, -1638362, 851974, 0, -1572828, 851974, 0, -1638364, 851974, 0, -1572825, 851974, 0, -1638361, 851974, 0, -1572829, 851974, 0, -1638365, 851974, 0, -1638366, 851974, 0, -1638367, 851974, 0, -1572830, 851974, 0, -1572831, 851974, 0, -1572832, 851974, 0, -1638368, 851974, 0, -1703906, 851974, 0, -1703905, 851974, 0, -1703908, 851974, 0, -1703907, 851974, 0, -1703904, 851974, 0, -1703903, 851974, 0, -1703902, 851974, 0, -1703901, 851974, 0, -1703900, 851974, 0, -1703899, 851974, 0, -1703898, 851974, 0, -1703897, 851974, 0)
layer_1/name = "walls"
layer_1/tile_data = PackedInt32Array(-1245156, 720902, 0, -1179620, 720902, 0, -1114084, 720902, 0, -1245155, 720902, 0, -1179619, 720902, 0, -1114083, 720902, 0, -1245154, 720902, 0, -1179618, 720902, 0, -1114082, 720902, 0, -1245153, 720902, 0, -1179617, 720902, 0, -1114081, 720902, 0, -1245152, 720902, 0, -1179616, 720902, 0, -1114080, 720902, 0, -1245151, 720902, 0, -1179615, 720902, 0, -1114079, 720902, 0, -1245150, 720902, 0, -1179614, 720902, 0, -1114078, 720902, 0, -1245149, 720902, 0, -1179613, 720902, 0, -1114077, 720902, 0, -1245148, 720902, 0, -1179612, 720902, 0, -1114076, 720902, 0, -1245147, 720902, 0, -1179611, 720902, 0, -1114075, 720902, 0, -1245146, 720902, 0, -1179610, 720902, 0, -1114074, 720902, 0, -1638371, 720902, 0, -1638370, 786438, 11, -1638369, 851974, 11, -1638368, 720902, 0, -1703905, 720902, 0, -1703906, 720902, 0, -1572836, 720902, 0, -1572835, 720902, 0, -1572834, 786438, 12, -1572833, 851974, 12, -1572832, 720902, 0, -1572831, 720902, 0, -1703912, 851974, 0, -1638376, 851974, 0, -1572840, 851974, 0, -1507304, 851974, 0, -1441768, 851974, 0, -1376232, 851974, 0, -1310696, 851974, 0, -1245160, 851974, 0, -1179624, 851974, 0, -1114088, 851974, 0, -1048552, 851974, 0, -983016, 851974, 0, -917480, 851974, 0, -851944, 851974, 0, -1703911, 851974, 0, -1638375, 851974, 0, -1572839, 851974, 0, -1507303, 851974, 0, -1441767, 851974, 0, -1376231, 851974, 0, -1310695, 851974, 0, -1245159, 851974, 0, -1179623, 851974, 0, -1114087, 851974, 0, -1048551, 851974, 0, -983015, 851974, 0, -917479, 851974, 0, -851943, 851974, 0, -1703910, 851974, 0, -1638374, 851974, 0, -1572838, 851974, 0, -1507302, 851974, 0, -1441766, 851974, 0, -1376230, 851974, 0, -1310694, 851974, 0, -1245158, 851974, 0, -1179622, 851974, 0, -1114086, 851974, 0, -1048550, 851974, 0, -983014, 851974, 0, -917478, 851974, 0, -851942, 851974, 0, -1703909, 851974, 0, -1638373, 851974, 0, -1572837, 851974, 0, -1507301, 851974, 0, -1441765, 851974, 0, -1376229, 851974, 0, -1310693, 851974, 0, -1245157, 851974, 0, -1179621, 851974, 0, -1114085, 851974, 0, -1048549, 851974, 0, -983013, 851974, 0, -917477, 851974, 0, -851941, 851974, 0, -1703897, 851974, 0, -1638361, 851974, 0, -1572825, 851974, 0, -1507289, 851974, 0, -1441753, 851974, 0, -1376217, 851974, 0, -1310681, 851974, 0, -1245145, 851974, 0, -1179609, 851974, 0, -1114073, 851974, 0, -1048537, 851974, 0, -983001, 851974, 0, -917465, 851974, 0, -851929, 851974, 0, -1703896, 851974, 0, -1638360, 851974, 0, -1572824, 851974, 0, -1507288, 851974, 0, -1441752, 851974, 0, -1376216, 851974, 0, -1310680, 851974, 0, -1245144, 851974, 0, -1179608, 851974, 0, -1114072, 851974, 0, -1048536, 851974, 0, -983000, 851974, 0, -917464, 851974, 0, -851928, 851974, 0, -1703895, 851974, 0, -1638359, 851974, 0, -1572823, 851974, 0, -1507287, 851974, 0, -1441751, 851974, 0, -1376215, 851974, 0, -1310679, 851974, 0, -1245143, 851974, 0, -1179607, 851974, 0, -1114071, 851974, 0, -1048535, 851974, 0, -982999, 851974, 0, -917463, 851974, 0, -851927, 851974, 0, -1703894, 851974, 0, -1638358, 851974, 0, -1572822, 851974, 0, -1507286, 851974, 0, -1441750, 851974, 0, -1376214, 851974, 0, -1310678, 851974, 0, -1245142, 851974, 0, -1179606, 851974, 0, -1114070, 851974, 0, -1048534, 851974, 0, -982998, 851974, 0, -917462, 851974, 0, -851926, 851974, 0, -1572830, 851974, 0, -1507294, 851974, 0, -1441758, 851974, 0, -1376222, 851974, 0, -1310686, 851974, 0, -1572829, 851974, 0, -1507293, 851974, 0, -1441757, 851974, 0, -1376221, 851974, 0, -1310685, 851974, 0, -1572828, 851974, 0, -1507292, 851974, 0, -1441756, 851974, 0, -1376220, 851974, 0, -1310684, 851974, 0, -1572827, 851974, 0, -1507291, 851974, 0, -1441755, 851974, 0, -1376219, 851974, 0, -1310683, 851974, 0, -1572826, 851974, 0, -1507290, 851974, 0, -1441754, 851974, 0, -1376218, 851974, 0, -1310682, 851974, 0, -786408, 851974, 0, -786407, 851974, 0, -786406, 851974, 0, -786405, 851974, 0, -786404, 851974, 0, -786403, 851974, 0, -786402, 851974, 0, -786401, 851974, 0, -786400, 851974, 0, -786399, 851974, 0, -786398, 851974, 0, -786397, 851974, 0, -786396, 851974, 0, -786395, 851974, 0, -786394, 851974, 0, -786393, 851974, 0, -786392, 851974, 0, -786391, 851974, 0, -786390, 851974, 0, -720872, 851974, 0, -655336, 851974, 0, -720871, 851974, 0, -655335, 851974, 0, -720870, 851974, 0, -655334, 851974, 0, -720869, 851974, 0, -655333, 851974, 0, -720868, 851974, 0, -655332, 851974, 0, -720867, 851974, 0, -655331, 851974, 0, -720866, 851974, 0, -655330, 851974, 0, -720865, 851974, 0, -655329, 851974, 0, -720864, 851974, 0, -655328, 851974, 0, -720863, 851974, 0, -655327, 851974, 0, -720862, 851974, 0, -655326, 851974, 0, -720861, 851974, 0, -655325, 851974, 0, -720860, 851974, 0, -655324, 851974, 0, -720859, 851974, 0, -655323, 851974, 0, -720858, 851974, 0, -655322, 851974, 0, -720857, 851974, 0, -655321, 851974, 0, -720856, 851974, 0, -655320, 851974, 0, -720855, 851974, 0, -655319, 851974, 0, -720854, 851974, 0, -655318, 851974, 0, -720853, 851974, 0, -655317, 851974, 0, -720852, 851974, 0, -655316, 851974, 0, -720851, 851974, 0, -655315, 851974, 0, -720850, 851974, 0, -655314, 851974, 0, -720876, 851974, 0, -655340, 851974, 0, -720875, 851974, 0, -655339, 851974, 0, -720874, 851974, 0, -655338, 851974, 0, -720873, 851974, 0, -655337, 851974, 0, -1703916, 851974, 0, -1638380, 851974, 0, -1572844, 851974, 0, -1507308, 851974, 0, -1441772, 851974, 0, -1376236, 851974, 0, -1310700, 851974, 0, -1245164, 851974, 0, -1179628, 851974, 0, -1114092, 851974, 0, -1048556, 851974, 0, -983020, 851974, 0, -917484, 851974, 0, -851948, 851974, 0, -786412, 851974, 0, -1703915, 851974, 0, -1638379, 851974, 0, -1572843, 851974, 0, -1507307, 851974, 0, -1441771, 851974, 0, -1376235, 851974, 0, -1310699, 851974, 0, -1245163, 851974, 0, -1179627, 851974, 0, -1114091, 851974, 0, -1048555, 851974, 0, -983019, 851974, 0, -917483, 851974, 0, -851947, 851974, 0, -786411, 851974, 0, -1703914, 851974, 0, -1638378, 851974, 0, -1572842, 851974, 0, -1507306, 851974, 0, -1441770, 851974, 0, -1376234, 851974, 0, -1310698, 851974, 0, -1245162, 851974, 0, -1179626, 851974, 0, -1114090, 851974, 0, -1048554, 851974, 0, -983018, 851974, 0, -917482, 851974, 0, -851946, 851974, 0, -786410, 851974, 0, -1703913, 851974, 0, -1638377, 851974, 0, -1572841, 851974, 0, -1507305, 851974, 0, -1441769, 851974, 0, -1376233, 851974, 0, -1310697, 851974, 0, -1245161, 851974, 0, -1179625, 851974, 0, -1114089, 851974, 0, -1048553, 851974, 0, -983017, 851974, 0, -917481, 851974, 0, -851945, 851974, 0, -786409, 851974, 0, -1703893, 851974, 0, -1638357, 851974, 0, -1572821, 851974, 0, -1507285, 851974, 0, -1441749, 851974, 0, -1376213, 851974, 0, -1310677, 851974, 0, -1245141, 851974, 0, -1179605, 851974, 0, -1114069, 851974, 0, -1048533, 851974, 0, -982997, 851974, 0, -917461, 851974, 0, -851925, 851974, 0, -786389, 851974, 0, -1703892, 851974, 0, -1638356, 851974, 0, -1572820, 851974, 0, -1507284, 851974, 0, -1441748, 851974, 0, -1376212, 851974, 0, -1310676, 851974, 0, -1245140, 851974, 0, -1179604, 851974, 0, -1114068, 851974, 0, -1048532, 851974, 0, -982996, 851974, 0, -917460, 851974, 0, -851924, 851974, 0, -786388, 851974, 0, -1703891, 851974, 0, -1638355, 851974, 0, -1572819, 851974, 0, -1507283, 851974, 0, -1441747, 851974, 0, -1376211, 851974, 0, -1310675, 851974, 0, -1245139, 851974, 0, -1179603, 851974, 0, -1114067, 851974, 0, -1048531, 851974, 0, -982995, 851974, 0, -917459, 851974, 0, -851923, 851974, 0, -786387, 851974, 0, -1703890, 851974, 0, -1638354, 851974, 0, -1572818, 851974, 0, -1507282, 851974, 0, -1441746, 851974, 0, -1376210, 851974, 0, -1310674, 851974, 0, -1245138, 851974, 0, -1179602, 851974, 0, -1114066, 851974, 0, -1048530, 851974, 0, -982994, 851974, 0, -917458, 851974, 0, -851922, 851974, 0, -786386, 851974, 0, -1834988, 851974, 0, -1769452, 851974, 0, -1834987, 851974, 0, -1769451, 851974, 0, -1834986, 851974, 0, -1769450, 851974, 0, -1834985, 851974, 0, -1769449, 851974, 0, -1834984, 851974, 0, -1769448, 851974, 0, -1834983, 851974, 0, -1769447, 851974, 0, -1834982, 851974, 0, -1769446, 851974, 0, -1834981, 851974, 0, -1769445, 851974, 0, -1834980, 851974, 0, -1769444, 851974, 0, -1834979, 851974, 0, -1769443, 851974, 0, -1834978, 851974, 0, -1769442, 851974, 0, -1834977, 851974, 0, -1769441, 851974, 0, -1834976, 851974, 0, -1769440, 851974, 0, -1834975, 851974, 0, -1769439, 851974, 0, -1834974, 851974, 0, -1769438, 851974, 0, -1834973, 851974, 0, -1769437, 851974, 0, -1834972, 851974, 0, -1769436, 851974, 0, -1834971, 851974, 0, -1769435, 851974, 0, -1834970, 851974, 0, -1769434, 851974, 0, -1834969, 851974, 0, -1769433, 851974, 0, -1834968, 851974, 0, -1769432, 851974, 0, -1834967, 851974, 0, -1769431, 851974, 0, -1834966, 851974, 0, -1769430, 851974, 0, -1834965, 851974, 0, -1769429, 851974, 0, -1834964, 851974, 0, -1769428, 851974, 0, -1834963, 851974, 0, -1769427, 851974, 0, -1834962, 851974, 0, -1769426, 851974, 0)
layer_2/name = "ysort"
layer_2/y_sort_enabled = true
layer_2/z_index = 1
layer_2/tile_data = PackedInt32Array(-983004, 393221, 12, -983007, 262149, 12, -851931, 720901, 268435463)
layer_3/name = "deco"
layer_3/tile_data = PackedInt32Array(-1179618, 983046, 1, -1114082, 983046, 1, -1179617, 1048582, 1, -1114081, 1048582, 1, -1245154, 983046, 0, -1245153, 1048582, 0, -851938, 655366, 3, -851937, 720902, 3)
metadata/_edit_lock_ = true

[node name="Collisions" type="StaticBody2D" parent="."]
z_index = 1
collision_layer = 4
collision_mask = 3

[node name="Border" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(448, -192, 448, -256, 480, -256, 480, -304, 448, -304, 448, -336, 487, -336, 487, -349, 448, -349, 448, -368, 544, -368, 544, -304, 512, -304, 512, -256, 624, -256, 624, -192, 640, -192, 640, -400, 432, -400, 432, -176, 656, -176, 656, -192)

[node name="Door" parent="Collisions" node_paths=PackedStringArray("collision") instance=ExtResource("2_k0awt")]
collision = NodePath("CollisionShape2D")
direction = "down"
new_area = "mission 1 - outside"
openable = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Collisions/Door"]
position = Vector2(496, -200)
shape = SubResource("RectangleShape2D_2586o")

[node name="NPCs" type="Node2D" parent="."]
z_index = 1
y_sort_enabled = true

[node name="OldManOMalley" parent="NPCs" instance=ExtResource("5_bimur")]
position = Vector2(575, -225)

[node name="Interactables" type="Node2D" parent="."]
z_index = 1
y_sort_enabled = true

[node name="Bed" parent="Interactables" node_paths=PackedStringArray("Collision", "bed_sprite", "sleeping_sprite") instance=ExtResource("5_lvp32")]
position = Vector2(512, -336)
Collision = NodePath("CollisionShape2D")
bed_sprite = NodePath("Bed")
sleeping_sprite = NodePath("Sleeping")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactables/Bed"]
position = Vector2(-36.5, -8)
shape = SubResource("RectangleShape2D_c6vuk")

[node name="Bed" type="Sprite2D" parent="Interactables/Bed"]
position = Vector2(-41, -16)
texture = ExtResource("6_vxsbm")

[node name="Sleeping" type="Sprite2D" parent="Interactables/Bed"]
position = Vector2(-41, -16)
texture = ExtResource("7_dt6dk")

[node name="Bread" parent="Interactables" node_paths=PackedStringArray("collision") instance=ExtResource("9_y25m5")]
collision = NodePath("CollisionShape2D")
dialogue_resource = ExtResource("10_2jodl")
inventory = SubResource("Resource_d0x5e")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactables/Bread"]
position = Vector2(528, -217)
shape = SubResource("RectangleShape2D_g3x2x")
