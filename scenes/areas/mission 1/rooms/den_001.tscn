[gd_scene load_steps=28 format=3 uid="uid://dr8erlirvq563"]

[ext_resource type="TileSet" uid="uid://b3v8i8oi20y22" path="res://assets/resources/tile_sets/outside.tres" id="1_4kvak"]
[ext_resource type="PackedScene" uid="uid://bd6kftdahgbka" path="res://scenes/components/level_transition.tscn" id="2_glwnp"]
[ext_resource type="PackedScene" uid="uid://sx8d1fd6ter4" path="res://scenes/interactables/door.tscn" id="3_n8bka"]
[ext_resource type="PackedScene" uid="uid://0e4cqtrxwquj" path="res://scenes/interactables/dialogue_object.tscn" id="4_f62g5"]
[ext_resource type="Resource" uid="uid://rajcohj25naw" path="res://assets/resources/dialogues/interactables/rat_den_bookshelf.dialogue" id="5_edejd"]
[ext_resource type="PackedScene" uid="uid://bde23rjcy8qr8" path="res://scenes/enemy.tscn" id="6_p0dm6"]
[ext_resource type="Texture2D" uid="uid://cpxkx2qd2rh17" path="res://assets/art/characters/enemy/rat_sprite.png" id="7_8o6sm"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kbg3o"]
size = Vector2(112, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_844am"]
size = Vector2(48, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_68feq"]
size = Vector2(16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_52i8a"]
atlas = ExtResource("7_8o6sm")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ddxgm"]
atlas = ExtResource("7_8o6sm")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_gyk61"]
atlas = ExtResource("7_8o6sm")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ve8xl"]
atlas = ExtResource("7_8o6sm")
region = Rect2(0, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_16c05"]
atlas = ExtResource("7_8o6sm")
region = Rect2(48, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_en8c4"]
atlas = ExtResource("7_8o6sm")
region = Rect2(96, 240, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_1j6b5"]
atlas = ExtResource("7_8o6sm")
region = Rect2(0, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_hd3cr"]
atlas = ExtResource("7_8o6sm")
region = Rect2(48, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_258l8"]
atlas = ExtResource("7_8o6sm")
region = Rect2(96, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_slgvh"]
atlas = ExtResource("7_8o6sm")
region = Rect2(0, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_u07fe"]
atlas = ExtResource("7_8o6sm")
region = Rect2(48, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_7lpld"]
atlas = ExtResource("7_8o6sm")
region = Rect2(96, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_52886"]
atlas = ExtResource("7_8o6sm")
region = Rect2(0, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ayaph"]
atlas = ExtResource("7_8o6sm")
region = Rect2(48, 192, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_n57x3"]
atlas = ExtResource("7_8o6sm")
region = Rect2(96, 192, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_lxb4o"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_52i8a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ddxgm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gyk61")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ve8xl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_16c05")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_en8c4")
}],
"loop": true,
"name": &"run_down",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_1j6b5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hd3cr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_258l8")
}],
"loop": true,
"name": &"run_left",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_slgvh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u07fe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7lpld")
}],
"loop": true,
"name": &"run_right",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_52886")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ayaph")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n57x3")
}],
"loop": true,
"name": &"run_up",
"speed": 6.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m2bwu"]
size = Vector2(27, 14)

[node name="Den001" type="Node2D"]
y_sort_enabled = true

[node name="TileMap" type="TileMap" parent="."]
y_sort_enabled = true
tile_set = ExtResource("1_4kvak")
format = 2
layer_0/name = "floor"
layer_0/tile_data = PackedInt32Array(-6619062, 131072, 9, -6619061, 131072, 9, -6619060, 131072, 9, -6619059, 131072, 9, -6619058, 131072, 9, -6619057, 131072, 9, -6619063, 131072, 9, -7274427, 196608, 13, -7208891, 131072, 14, -7143355, 0, 13, -7077819, 131072, 14, -7012283, 0, 12, -6946747, 327680, 14, -6881211, 65536, 13, -6815675, 0, 12, -6750139, 0, 13, -6684603, 0, 14, -7274426, 0, 14, -7208890, 0, 12, -7143354, 0, 13, -7077818, 0, 14, -7012282, 327680, 13, -6946746, 0, 13, -6881210, 262144, 13, -6815674, 262144, 12, -6750138, 0, 13, -6684602, 0, 14, -7274425, 0, 14, -7208889, 65536, 14, -7143353, 0, 13, -7077817, 196608, 14, -7012281, 0, 12, -6946745, 196608, 13, -6881209, 131072, 14, -6815673, 0, 12, -6750137, 0, 13, -6684601, 0, 14, -7274424, 0, 14, -7208888, 65536, 12, -7143352, 65536, 13, -7077816, 327680, 13, -7012280, 0, 12, -6946744, 0, 13, -6881208, 65536, 14, -6815672, 0, 12, -6750136, 327680, 13, -6684600, 196608, 13, -7274423, 65536, 14, -7208887, 0, 12, -7143351, 0, 13, -7077815, 262144, 12, -7012279, 327680, 14, -6946743, 0, 13, -6881207, 131072, 13, -6815671, 327680, 12, -6750135, 196608, 12, -6684599, 0, 14, -7274422, 0, 1, -7208886, 0, 2, -7143350, 0, 1, -7077814, 0, 2, -7012278, 0, 1, -6946742, 0, 2, -6881206, 0, 1, -6815670, 0, 2, -6750134, 0, 1, -6684598, 0, 2, -7274421, 0, 1, -7208885, 0, 2, -7143349, 0, 2, -7077813, 0, 2, -7012277, 0, 1, -6946741, 0, 2, -6881205, 0, 1, -6815669, 0, 2, -6750133, 0, 1, -6684597, 0, 2, -7274420, 0, 1, -7208884, 0, 2, -7143348, 0, 2, -7077812, 0, 1, -7012276, 0, 2, -6946740, 0, 1, -6881204, 0, 2, -6815668, 0, 1, -6750132, 0, 2, -6684596, 0, 2, -7274419, 0, 1, -7208883, 0, 2, -7143347, 0, 2, -7077811, 0, 1, -7012275, 0, 2, -6946739, 0, 1, -6881203, 0, 2, -6815667, 0, 1, -6750131, 0, 2, -6684595, 0, 2, -7274418, 0, 1, -7208882, 0, 2, -7143346, 0, 1, -7077810, 0, 1, -7012274, 0, 2, -6946738, 0, 1, -6881202, 0, 2, -6815666, 0, 1, -6750130, 0, 2, -6684594, 0, 2, -7274417, 0, 1, -7208881, 0, 2, -7143345, 0, 1, -7077809, 0, 2, -7012273, 0, 1, -6946737, 0, 2, -6881201, 0, 1, -6815665, 0, 2, -6750129, 0, 1, -6684593, 0, 2, -7274416, 65536, 12, -7208880, 262144, 13, -7143344, 262144, 13, -7077808, 262144, 13, -7012272, 0, 12, -6946736, 0, 13, -6881200, 0, 14, -6815664, 0, 12, -6750128, 0, 13, -6684592, 262144, 12, -7274415, 65536, 12, -7208879, 0, 12, -7143343, 196608, 13, -7077807, 65536, 12, -7012271, 0, 12, -6946735, 0, 13, -6881199, 327680, 12, -6815663, 327680, 14, -6750127, 327680, 13, -6684591, 65536, 12, -7274414, 262144, 13, -7208878, 65536, 14, -7143342, 327680, 14, -7077806, 0, 14, -7012270, 0, 12, -6946734, 0, 13, -6881198, 0, 14, -6815662, 0, 12, -6750126, 0, 13, -6684590, 0, 14, -7274413, 0, 14, -7208877, 0, 12, -7143341, 0, 13, -7077805, 0, 14, -7012269, 0, 12, -6946733, 262144, 12, -6881197, 0, 14, -6815661, 0, 12, -6750125, 0, 13, -6684589, 0, 14, -7405499, 0, 13, -7339963, 65536, 13, -7405498, 262144, 14, -7339962, 0, 14, -7405497, 0, 13, -7339961, 131072, 12, -7405496, 0, 13, -7339960, 196608, 12, -7405495, 0, 13, -7339959, 196608, 13, -7405494, 0, 1, -7339958, 0, 1, -7405493, 0, 1, -7339957, 0, 1, -7405492, 0, 1, -7339956, 0, 1, -7405491, 0, 1, -7339955, 0, 1, -7405490, 0, 1, -7339954, 0, 1, -7405489, 0, 1, -7339953, 0, 1, -7405488, 131072, 12, -7339952, 0, 14, -7405487, 0, 13, -7339951, 0, 14, -7405486, 0, 13, -7339950, 0, 14, -7405485, 0, 13, -7339949, 0, 14)
layer_1/name = "walls"
layer_1/tile_data = PackedInt32Array(-7143355, 196608, 0, -7208890, 196608, 0, -7274426, 196608, 0, -7274425, 196608, 0, -7274424, 196608, 0, -7339960, 196608, 0, -7405496, 196608, 0, -7405495, 196608, 0, -7405494, 196608, 0, -7405493, 196608, 0, -7405492, 196608, 0, -7405491, 196608, 0, -7405490, 196608, 0, -7405489, 196608, 0, -7339952, 196608, 0, -7339951, 196608, 0, -7274415, 196608, 0, -7208878, 196608, 0, -7208877, 196608, 0, -7274413, 196608, 0, -7339949, 196608, 0, -7339950, 196608, 0, -7274414, 196608, 0, -7405486, 196608, 0, -7405487, 196608, 0, -7405488, 196608, 0, -7405485, 196608, 0, -7405498, 196608, 0, -7405497, 196608, 0, -7339961, 196608, 0, -7339962, 196608, 0, -7339963, 196608, 0, -7274427, 196608, 0, -7208891, 196608, 0, -7405499, 196608, 0, -7339953, 196608, 0, -7274416, 196608, 0, -7274417, 196608, 0, -7339954, 196608, 0, -7339957, 196608, 0, -7339958, 196608, 0, -7339959, 196608, 0, -7274422, 196608, 0, -7208887, 196608, 0, -7274423, 196608, 0, -7208888, 196608, 0, -7208889, 196608, 0, -7208879, 196608, 0, -7602111, 851974, 0, -7536575, 851974, 0, -7471039, 851974, 0, -7405503, 851974, 0, -7339967, 851974, 0, -7274431, 851974, 0, -7208895, 851974, 0, -7143359, 851974, 0, -7077823, 851974, 0, -7012287, 851974, 0, -6946751, 851974, 0, -6881215, 851974, 0, -6815679, 851974, 0, -6750143, 851974, 0, -6684607, 851974, 0, -7602110, 851974, 0, -7536574, 851974, 0, -7471038, 851974, 0, -7405502, 851974, 0, -7339966, 851974, 0, -7274430, 851974, 0, -7208894, 851974, 0, -7143358, 851974, 0, -7077822, 851974, 0, -7012286, 851974, 0, -6946750, 851974, 0, -6881214, 851974, 0, -6815678, 851974, 0, -6750142, 851974, 0, -6684606, 851974, 0, -7602109, 851974, 0, -7536573, 851974, 0, -7471037, 851974, 0, -7405501, 851974, 0, -7339965, 851974, 0, -7274429, 851974, 0, -7208893, 851974, 0, -7143357, 851974, 0, -7077821, 851974, 0, -7012285, 851974, 0, -6946749, 851974, 0, -6881213, 851974, 0, -6815677, 851974, 0, -6750141, 851974, 0, -6684605, 851974, 0, -7602108, 851974, 0, -7536572, 851974, 0, -7471036, 851974, 0, -7405500, 851974, 0, -7339964, 851974, 0, -7274428, 851974, 0, -7208892, 851974, 0, -7143356, 851974, 0, -7077820, 851974, 0, -7012284, 851974, 0, -6946748, 851974, 0, -6881212, 851974, 0, -6815676, 851974, 0, -6750140, 851974, 0, -6684604, 851974, 0, -7602107, 851974, 0, -7536571, 851974, 0, -7471035, 851974, 0, -7602106, 851974, 0, -7536570, 851974, 0, -7471034, 851974, 0, -7602105, 851974, 0, -7536569, 851974, 0, -7471033, 851974, 0, -7602104, 851974, 0, -7536568, 851974, 0, -7471032, 851974, 0, -7602103, 851974, 0, -7536567, 851974, 0, -7471031, 851974, 0, -7602102, 851974, 0, -7536566, 851974, 0, -7471030, 851974, 0, -7602101, 851974, 0, -7536565, 851974, 0, -7471029, 851974, 0, -7602100, 851974, 0, -7536564, 851974, 0, -7471028, 851974, 0, -7602099, 851974, 0, -7536563, 851974, 0, -7471027, 851974, 0, -7602098, 851974, 0, -7536562, 851974, 0, -7471026, 851974, 0, -7602097, 851974, 0, -7536561, 851974, 0, -7471025, 851974, 0, -7602096, 851974, 0, -7536560, 851974, 0, -7471024, 851974, 0, -7602095, 851974, 0, -7536559, 851974, 0, -7471023, 851974, 0, -7602094, 851974, 0, -7536558, 851974, 0, -7471022, 851974, 0, -7602093, 851974, 0, -7536557, 851974, 0, -7471021, 851974, 0, -7602092, 851974, 0, -7536556, 851974, 0, -7471020, 851974, 0, -7602091, 851974, 0, -7536555, 851974, 0, -7471019, 851974, 0, -7602090, 851974, 0, -7536554, 851974, 0, -7471018, 851974, 0, -7602089, 851974, 0, -7536553, 851974, 0, -7471017, 851974, 0, -7405484, 851974, 0, -7339948, 851974, 0, -7274412, 851974, 0, -7208876, 851974, 0, -7143340, 851974, 0, -7077804, 851974, 0, -7012268, 851974, 0, -6946732, 851974, 0, -6881196, 851974, 0, -6815660, 851974, 0, -6750124, 851974, 0, -6684588, 851974, 0, -7405483, 851974, 0, -7339947, 851974, 0, -7274411, 851974, 0, -7208875, 851974, 0, -7143339, 851974, 0, -7077803, 851974, 0, -7012267, 851974, 0, -6946731, 851974, 0, -6881195, 851974, 0, -6815659, 851974, 0, -6750123, 851974, 0, -6684587, 851974, 0, -7405482, 851974, 0, -7339946, 851974, 0, -7274410, 851974, 0, -7208874, 851974, 0, -7143338, 851974, 0, -7077802, 851974, 0, -7012266, 851974, 0, -6946730, 851974, 0, -6881194, 851974, 0, -6815658, 851974, 0, -6750122, 851974, 0, -6684586, 851974, 0, -7405481, 851974, 0, -7339945, 851974, 0, -7274409, 851974, 0, -7208873, 851974, 0, -7143337, 851974, 0, -7077801, 851974, 0, -7012265, 851974, 0, -6946729, 851974, 0, -6881193, 851974, 0, -6815657, 851974, 0, -6750121, 851974, 0, -6684585, 851974, 0)
layer_2/name = "ysort"
layer_2/y_sort_enabled = true
layer_2/z_index = 1
layer_2/tile_data = PackedInt32Array(-7012273, 1, 1, -6946743, 1, 1, -6750138, 1, 1, -6750126, 1, 1, -7143350, 1, 0, -7012282, 196613, 2)
layer_3/name = "deco"
layer_3/tile_data = PackedInt32Array()
metadata/_edit_lock_ = true

[node name="Collisions" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(1168, -1616, 1168, -1600, 1280, -1600, 1280, -1616, 1344, -1616, 1344, -1744, 1280, -1744, 1280, -1760, 1184, -1760, 1184, -1744, 1120, -1744, 1120, -1728, 1104, -1728, 1104, -1600, 1072, -1600, 1072, -1776, 1360, -1776, 1360, -1584, 1040, -1584, 1040, -1616)

[node name="DoorToNorth003" parent="Collisions" node_paths=PackedStringArray("collision") instance=ExtResource("3_n8bka")]
new_room_index = 3
collision = NodePath("CollisionShape2D")
direction = "down"
new_area = "mission 1 - outside"
openable = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Collisions/DoorToNorth003"]
position = Vector2(1224, -1608)
shape = SubResource("RectangleShape2D_kbg3o")

[node name="ToDen002" parent="Collisions" instance=ExtResource("2_glwnp")]
position = Vector2(1200, -1760)
new_room_index = 1
direction = "up"

[node name="Collision" parent="Collisions/ToDen002" index="0"]
polygon = PackedVector2Array(-16, 0, 80, 0, 80, 16, -16, 16)

[node name="Interactables" type="Node2D" parent="."]
z_index = 1
y_sort_enabled = true

[node name="Bookshelf" parent="Interactables" node_paths=PackedStringArray("Collision") instance=ExtResource("4_f62g5")]
Collision = NodePath("CollisionShape2D")
dialogue_resource = ExtResource("5_edejd")
title = "start"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactables/Bookshelf"]
position = Vector2(1128, -1688)
shape = SubResource("RectangleShape2D_844am")

[node name="Sign" parent="Interactables" node_paths=PackedStringArray("Collision") instance=ExtResource("4_f62g5")]
Collision = NodePath("CollisionShape2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactables/Sign"]
position = Vector2(1192, -1720)
shape = SubResource("RectangleShape2D_68feq")

[node name="Enemies" type="Node2D" parent="."]
z_index = 1
y_sort_enabled = true

[node name="Rat009" parent="Enemies" node_paths=PackedStringArray("sprite", "enemy_collision") instance=ExtResource("6_p0dm6")]
position = Vector2(1309, -1728)
enemy_name = "Rat"
enemy_battle_path = "res://scenes/enemies/rat.tscn"
sprite = NodePath("AnimatedSprite2D")
detection_area = 96.0
battle_area = 32.0
enemy_collision = NodePath("CollisionShape2D")
speed = 75.0
chases = true

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Enemies/Rat009"]
sprite_frames = SubResource("SpriteFrames_lxb4o")
animation = &"idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemies/Rat009"]
position = Vector2(2.5, 16)
shape = SubResource("RectangleShape2D_m2bwu")

[editable path="Collisions/ToDen002"]
